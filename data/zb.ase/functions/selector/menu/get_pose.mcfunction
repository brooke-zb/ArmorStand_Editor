# reset storage #
data modify storage zb:ase PoseMenu set value []

#=====================================================
#    [头部1]   [身体2]   [左臂3]   [右臂4]   [左腿5]   [右腿6]
#[X] |||||||||||| 0
#[Y] |||||||||||| -180
#[Z] |||||||||||| 60
#    [复制] [粘贴]
#[-90] [-30] [-10] [-5] [-1]    [+1] [+5] [+10] [+30] [+90] [+180]
#=====================================================

# set score & tag #
execute unless score @s zb.ase_opt_part matches 1..6 run scoreboard players set @s zb.ase_opt_part 1
tag @s[tag=!zb.ase_opt_x,tag=!zb.ase_opt_y,tag=!zb.ase_opt_z] add zb.ase_opt_x

# store menu #
data modify storage zb:ase PoseMenu append value '[{"text":"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n================= \\u00a7a盔甲架编辑器-Pose\\u00a77 =====================\\n\\n","color":"gray"},{"text":"    \\u00a78."}]'

# store slot select #
execute if score @s zb.ase_opt_part matches 1 run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"[头部]","bold":true,"color":"yellow"},{"text":"   "},{"text":"[身体]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为身体"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_body"}},{"text":"   "},{"text":"[左臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftarm"}},{"text":"   "},{"text":"[右臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightarm"}},{"text":"   "},{"text":"[左腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftleg"}},{"text":"   "},{"text":"[右腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightleg"}}]'
execute if score @s zb.ase_opt_part matches 2 run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"[头部]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为头部"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_head"}},{"text":"   "},{"text":"[身体]","bold":true,"color":"yellow"},{"text":"   "},{"text":"[左臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftarm"}},{"text":"   "},{"text":"[右臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightarm"}},{"text":"   "},{"text":"[左腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftleg"}},{"text":"   "},{"text":"[右腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightleg"}}]'
execute if score @s zb.ase_opt_part matches 3 run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"[头部]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为头部"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_head"}},{"text":"   "},{"text":"[身体]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为身体"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_body"}},{"text":"   "},{"text":"[左臂]","bold":true,"color":"yellow"},{"text":"   "},{"text":"[右臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightarm"}},{"text":"   "},{"text":"[左腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftleg"}},{"text":"   "},{"text":"[右腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightleg"}}]'
execute if score @s zb.ase_opt_part matches 4 run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"[头部]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为头部"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_head"}},{"text":"   "},{"text":"[身体]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为身体"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_body"}},{"text":"   "},{"text":"[左臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftarm"}},{"text":"   "},{"text":"[右臂]","bold":true,"color":"yellow"},{"text":"   "},{"text":"[左腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftleg"}},{"text":"   "},{"text":"[右腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightleg"}}]'
execute if score @s zb.ase_opt_part matches 5 run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"[头部]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为头部"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_head"}},{"text":"   "},{"text":"[身体]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为身体"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_body"}},{"text":"   "},{"text":"[左臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftarm"}},{"text":"   "},{"text":"[右臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightarm"}},{"text":"   "},{"text":"[左腿]","bold":true,"color":"yellow"},{"text":"   "},{"text":"[右腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightleg"}}]'
execute if score @s zb.ase_opt_part matches 6 run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"[头部]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为头部"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_head"}},{"text":"   "},{"text":"[身体]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为身体"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_body"}},{"text":"   "},{"text":"[左臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftarm"}},{"text":"   "},{"text":"[右臂]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为右臂"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_rightarm"}},{"text":"   "},{"text":"[左腿]","color":"gray","hoverEvent":{"action":"show_text","value":"切换为左腿"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/part_leftleg"}},{"text":"   "},{"text":"[右腿]","bold":true,"color":"yellow"}]'

# store part pose #
data modify storage zb:ase Pose set value ["null","null","null"]
execute if score @s zb.ase_opt_part matches 1 run data modify storage zb:ase Pose set from entity @e[type=armor_stand,tag=zb.ase_edit,limit=1] Pose.Head
execute if score @s zb.ase_opt_part matches 2 run data modify storage zb:ase Pose set from entity @e[type=armor_stand,tag=zb.ase_edit,limit=1] Pose.Body
execute if score @s zb.ase_opt_part matches 3 run data modify storage zb:ase Pose set from entity @e[type=armor_stand,tag=zb.ase_edit,limit=1] Pose.LeftArm
execute if score @s zb.ase_opt_part matches 4 run data modify storage zb:ase Pose set from entity @e[type=armor_stand,tag=zb.ase_edit,limit=1] Pose.RightArm
execute if score @s zb.ase_opt_part matches 5 run data modify storage zb:ase Pose set from entity @e[type=armor_stand,tag=zb.ase_edit,limit=1] Pose.LeftLeg
execute if score @s zb.ase_opt_part matches 6 run data modify storage zb:ase Pose set from entity @e[type=armor_stand,tag=zb.ase_edit,limit=1] Pose.RightLeg

# store axis select #
## x
execute if entity @s[tag=zb.ase_opt_x] if entity @s[tag=!zb.ase_opt_y,tag=!zb.ase_opt_z] run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"\\n[X]","color":"red","hoverEvent":{"action":"show_text","value":{"text":"至少保留一个轴","color":"red"}}},{"text":" "}]'
execute if entity @s[tag=zb.ase_opt_x] unless entity @s[tag=!zb.ase_opt_y,tag=!zb.ase_opt_z] run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"\\n[X]","color":"red","hoverEvent":{"action":"show_text","value":"取消对X轴的编辑"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/axis_x_f"}},{"text":" "}]'
execute if entity @s[tag=!zb.ase_opt_x] run data modify storage zb:ase PoseMenu append value '[{"text":""},{"text":"\\n[X]","color":"gray","hoverEvent":{"action":"show_text","value":"增加对X轴的编辑"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/axis_x_t"}},{"text":" "}]'

scoreboard players reset @e[type=armor_stand,tag=zb.ase_edit] zb.ase_temp
execute if score @s zb.ase_opt_part matches 1 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.Head store result score @s zb.ase_temp run data get entity @s Pose.Head[0]
execute if score @s zb.ase_opt_part matches 2 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.Body store result score @s zb.ase_temp run data get entity @s Pose.Body[0]
execute if score @s zb.ase_opt_part matches 3 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.LeftArm store result score @s zb.ase_temp run data get entity @s Pose.LeftArm[0]
execute if score @s zb.ase_opt_part matches 4 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.RightArm store result score @s zb.ase_temp run data get entity @s Pose.RightArm[0]
execute if score @s zb.ase_opt_part matches 5 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.LeftLeg store result score @s zb.ase_temp run data get entity @s Pose.LeftLeg[0]
execute if score @s zb.ase_opt_part matches 6 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.RightLeg store result score @s zb.ase_temp run data get entity @s Pose.RightLeg[0]

execute as @e[type=armor_stand,tag=zb.ase_edit,limit=1] run function zb.ase:selector/get_pose_x

## y
execute if entity @s[tag=zb.ase_opt_y] if entity @s[tag=!zb.ase_opt_x,tag=!zb.ase_opt_z] run data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[0]","storage":"zb:ase","color":"aqua"},{"text":"\\n[Y]","color":"green","hoverEvent":{"action":"show_text","value":{"text":"至少保留一个轴","color":"red"}}},{"text":" "}]'
execute if entity @s[tag=zb.ase_opt_y] unless entity @s[tag=!zb.ase_opt_x,tag=!zb.ase_opt_z] run data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[0]","storage":"zb:ase","color":"aqua"},{"text":"\\n[Y]","color":"green","hoverEvent":{"action":"show_text","value":"取消对Y轴的编辑"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/axis_y_f"}},{"text":" "}]'
execute if entity @s[tag=!zb.ase_opt_y] run data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[0]","storage":"zb:ase","color":"aqua"},{"text":"\\n[Y]","color":"gray","hoverEvent":{"action":"show_text","value":"增加对Y轴的编辑"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/axis_y_t"}},{"text":" "}]'

scoreboard players reset @e[type=armor_stand,tag=zb.ase_edit] zb.ase_temp
execute if score @s zb.ase_opt_part matches 1 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.Head store result score @s zb.ase_temp run data get entity @s Pose.Head[1]
execute if score @s zb.ase_opt_part matches 2 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.Body store result score @s zb.ase_temp run data get entity @s Pose.Body[1]
execute if score @s zb.ase_opt_part matches 3 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.LeftArm store result score @s zb.ase_temp run data get entity @s Pose.LeftArm[1]
execute if score @s zb.ase_opt_part matches 4 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.RightArm store result score @s zb.ase_temp run data get entity @s Pose.RightArm[1]
execute if score @s zb.ase_opt_part matches 5 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.LeftLeg store result score @s zb.ase_temp run data get entity @s Pose.LeftLeg[1]
execute if score @s zb.ase_opt_part matches 6 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.RightLeg store result score @s zb.ase_temp run data get entity @s Pose.RightLeg[1]

execute as @e[type=armor_stand,tag=zb.ase_edit,limit=1] run function zb.ase:selector/get_pose_y

## z
execute if entity @s[tag=zb.ase_opt_z] if entity @s[tag=!zb.ase_opt_x,tag=!zb.ase_opt_y] run data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[1]","storage":"zb:ase","color":"aqua"},{"text":"\\n[Z]","color":"blue","hoverEvent":{"action":"show_text","value":{"text":"至少保留一个轴","color":"red"}}},{"text":" "}]'
execute if entity @s[tag=zb.ase_opt_z] unless entity @s[tag=!zb.ase_opt_x,tag=!zb.ase_opt_y] run data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[1]","storage":"zb:ase","color":"aqua"},{"text":"\\n[Z]","color":"blue","hoverEvent":{"action":"show_text","value":"取消对Z轴的编辑"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/axis_z_f"}},{"text":" "}]'
execute if entity @s[tag=!zb.ase_opt_z] run data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[1]","storage":"zb:ase","color":"aqua"},{"text":"\\n[Z]","color":"gray","hoverEvent":{"action":"show_text","value":"增加对Z轴的编辑"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/axis_z_t"}},{"text":" "}]'

scoreboard players reset @e[type=armor_stand,tag=zb.ase_edit] zb.ase_temp
execute if score @s zb.ase_opt_part matches 1 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.Head store result score @s zb.ase_temp run data get entity @s Pose.Head[2]
execute if score @s zb.ase_opt_part matches 2 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.Body store result score @s zb.ase_temp run data get entity @s Pose.Body[2]
execute if score @s zb.ase_opt_part matches 3 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.LeftArm store result score @s zb.ase_temp run data get entity @s Pose.LeftArm[2]
execute if score @s zb.ase_opt_part matches 4 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.RightArm store result score @s zb.ase_temp run data get entity @s Pose.RightArm[2]
execute if score @s zb.ase_opt_part matches 5 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.LeftLeg store result score @s zb.ase_temp run data get entity @s Pose.LeftLeg[2]
execute if score @s zb.ase_opt_part matches 6 as @e[type=armor_stand,tag=zb.ase_edit,limit=1] if data entity @s Pose.RightLeg store result score @s zb.ase_temp run data get entity @s Pose.RightLeg[2]

execute as @e[type=armor_stand,tag=zb.ase_edit,limit=1] run function zb.ase:selector/get_pose_z

# angle button #
data modify storage zb:ase PoseMenu append value '[{"text":" "},{"nbt":"Pose[2]","storage":"zb:ase","color":"aqua"},{"text":"\\n    \\u00a78."},{"text":"[复制] ","color":"green","hoverEvent":{"action":"show_text","value":"复制X、Y、Z三轴角度到剪贴板"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/copy"}},{"text":"[粘贴]","color":"red","hoverEvent":{"action":"show_text","value":"从剪贴板粘贴X、Y、Z三轴角度"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/paste"}},{"text":" [清空]","color":"gold","hoverEvent":{"action":"show_text","value":"清空剪贴板内容"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/empty_clipboard"}},{"text":"\\n\\n[-90] ","color":"red","hoverEvent":{"action":"show_text","value":"减少90°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/reduce_90"}},{"text":"[-30] ","color":"red","hoverEvent":{"action":"show_text","value":"减少30°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/reduce_30"}},{"text":"[-10] ","color":"red","hoverEvent":{"action":"show_text","value":"减少10°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/reduce_10"}},{"text":"[-5] ","color":"red","hoverEvent":{"action":"show_text","value":"减少5°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/reduce_5"}},{"text":"[-1] ","color":"red","hoverEvent":{"action":"show_text","value":"减少1°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/reduce_1"}},{"text":"[+1] ","color":"green","hoverEvent":{"action":"show_text","value":"增加1°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/add_1"}},{"text":"[+5] ","color":"green","hoverEvent":{"action":"show_text","value":"增加5°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/add_5"}},{"text":"[+10] ","color":"green","hoverEvent":{"action":"show_text","value":"增加10°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/add_10"}},{"text":"[+30] ","color":"green","hoverEvent":{"action":"show_text","value":"增加30°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/add_30"}},{"text":"[+90] ","color":"green","hoverEvent":{"action":"show_text","value":"增加90°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/add_90"}},{"text":"[+180] ","color":"green","hoverEvent":{"action":"show_text","value":"增加180°"},"clickEvent":{"action":"run_command","value":"/function zb.ase:pose/add_180"}},{"text":"\\n\\n[⏎]","color":"gold","hoverEvent":{"action":"show_text","value":"返回主菜单"},"clickEvent":{"action":"run_command","value":"/function zb.ase:echo/edit_menu"}},{"text":" ==================================================","color":"gray"}]'